(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{5850:(e,s,a)=>{Promise.resolve().then(a.bind(a,1995))},1995:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(5155),l=a(2115),r=a(6481),i=a(9266),d=a(7216),c=a(5325),n=a(7493),m=a(7661),o=a(4333),x=a(6046),u=a(7192),h=a(7506),p=a(2160),b=a(3697),j=a(4595),g=a(7058);let N=(0,h.c)("pk_test_YOUR_STRIPE_PUBLISHABLE_KEY"),f=e=>{let{cartItems:s}=e,a=(0,p.useStripe)(),h=(0,p.useElements)(),N=(0,x.useRouter)(),f=(0,x.useSearchParams)().get("cartData"),y=f?JSON.parse(f):s,[v,w]=(0,l.useState)(!1),[C,k]=(0,l.useState)(null),[S,I]=(0,l.useState)(null),[A,q]=(0,l.useState)({email:"",firstName:"",lastName:"",address:"",city:"",country:"",postalCode:""}),[_,E]=(0,l.useState)({}),D=e=>{let{name:s,value:a}=e.target;q({...A,[s]:a}),_[s]&&E({..._,[s]:""})},O=()=>{let e={};return A.email||(e.email="Email is required"),A.firstName||(e.firstName="First name is required"),A.lastName||(e.lastName="Last name is required"),A.address||(e.address="Address is required"),A.city||(e.city="City is required"),A.postalCode||(e.postalCode="Postal code is required"),E(e),0===Object.keys(e).length},P=()=>{let e=new Date;return e.setDate(e.getDate()+5),{orderId:(0,b.A)(),status:"processing",estimatedDelivery:e,trackingNumber:"TRACK-".concat(Math.random().toString(36).substr(2,9).toUpperCase()),shippingMethod:"Standard Shipping"}},T=async e=>{if(e.preventDefault(),O()&&a&&h){w(!0),k(null);try{let e=await fetch("api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*(0,u.k)(y).total,currency:"usd"})}),{clientSecret:s}=await e.json(),t=await a.confirmCardPayment(s,{payment_method:{card:h.getElement(p.CardElement),billing_details:{name:"".concat(A.firstName," ").concat(A.lastName),email:A.email,address:{city:A.city,postal_code:A.postalCode}}}});if(t.error)k(t.error.message||"Payment failed"),w(!1);else{let e=P();I(e),await (0,g.gS)((0,g.rJ)(j.db,"orders"),{...e,customerInfo:A,items:y,createdAt:g.Dc.now()}),N.push("/order-confirmation?orderId=".concat(e.orderId))}}catch(e){k("An unexpected error occurred"),w(!1)}}},{subtotal:F,shipping:z,total:B}=(0,u.k)(y);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)("form",{onSubmit:T,children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)("span",{className:"p-2 bg-black text-white rounded-full text-sm",children:"1"}),"Contact Information",(0,t.jsx)(r.A,{className:"w-5 h-5 ml-2"})]})}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:A.email,onChange:D,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none ".concat(_.email?"border-red-500":""),required:!0}),_.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:_.email})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)("span",{className:"p-2 bg-black text-white rounded-full text-sm",children:"2"}),"Shipping Information",(0,t.jsx)(i.A,{className:"w-5 h-5 ml-2"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"First Name"}),(0,t.jsx)("input",{type:"text",name:"firstName",value:A.firstName,onChange:D,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none ".concat(_.firstName?"border-red-500":""),required:!0}),_.firstName&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:_.firstName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Last Name"}),(0,t.jsx)("input",{type:"text",name:"lastName",value:A.lastName,onChange:D,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none ".concat(_.lastName?"border-red-500":""),required:!0}),_.lastName&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:_.lastName})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",name:"address",value:A.address,onChange:D,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none ".concat(_.address?"border-red-500":""),required:!0}),_.address&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:_.address})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:A.city,onChange:D,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none ".concat(_.city?"border-red-500":""),required:!0}),_.city&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:_.city})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),(0,t.jsx)("input",{type:"text",name:"postalCode",value:A.postalCode,onChange:D,className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-black focus:outline-none ".concat(_.postalCode?"border-red-500":""),required:!0}),_.postalCode&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:_.postalCode})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)("span",{className:"p-2 bg-black text-white rounded-full text-sm",children:"3"}),"Payment Information",(0,t.jsx)(d.A,{className:"w-5 h-5 ml-2"})]})}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Card Details"}),(0,t.jsx)(p.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})]})})]}),C&&(0,t.jsx)("div",{className:"text-red-500 text-sm mb-4",children:C}),(0,t.jsxs)("button",{type:"submit",disabled:v,className:"w-full bg-black text-white py-4 rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:[v?"Processing...":"Complete Order",(0,t.jsx)(c.A,{className:"w-4 h-4"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>N.push("/"),className:"w-full mt-4 bg-gray-200 text-black py-4 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-4",children:["Go Back Home",(0,t.jsx)(n.A,{className:"w-4 h-4"})]})]})}),S&&(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4 mt-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,t.jsx)(m.A,{className:"mr-2"})," Order Tracking"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium flex items-center",children:[(0,t.jsx)(o.A,{className:"mr-2 text-blue-500"}),"Order ID: ",S.orderId]}),(0,t.jsxs)("p",{className:"flex items-center",children:[(0,t.jsx)(i.A,{className:"mr-2 text-green-500"}),"Status: ",S.status.charAt(0).toUpperCase()+S.status.slice(1)]}),(0,t.jsxs)("p",{children:["Tracking Number: ",S.trackingNumber]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["Shipping Method: ",S.shippingMethod]}),(0,t.jsxs)("p",{children:["Estimated Delivery: ",S.estimatedDelivery.toLocaleDateString()]})]})]})]})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-4",children:[y.map(e=>(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("img",{src:e.product.images[0],alt:e.product.name,className:"w-16 h-16 object-cover rounded"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.product.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Color: ",e.selectedColor.name]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Size: ",e.selectedSize]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]}),(0,t.jsxs)("p",{className:"font-medium",children:["$",(e.product.price*e.quantity).toFixed(2)]})]},e.product.id)),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",F.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Shipping"}),(0,t.jsxs)("span",{children:["$",z.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",B.toFixed(2)]})]})]})]})]})})]})]})})},y=e=>{let{cartItems:s}=e;return(0,t.jsx)(p.Elements,{stripe:N,children:(0,t.jsx)(f,{cartItems:s})})};function v(){return(0,t.jsx)(y,{cartItems:[]})}},4595:(e,s,a)=>{"use strict";a.d(s,{I:()=>m,db:()=>n,j:()=>c});var t=a(9904),l=a(4565),r=a(7058),i=a(333);let d=(0,t.Wp)({apiKey:"AIzaSyCHRWq6ao_wi33wza9BXaGsSv8s1_hYbng",authDomain:"fashion-shop-99386.firebaseapp.com",projectId:"fashion-shop-99386",storageBucket:"fashion-shop-99386.firebasestorage.app",messagingSenderId:"788384049752",appId:"1:788384049752:web:3b2d82572f5cae0e9e782d",measurementId:"G-24QV27CYQV"}),c=(0,l.xI)(d),n=(0,r.aU)(d),m=(0,i.c7)(d)},7192:(e,s,a)=>{"use strict";a.d(s,{k:()=>t});let t=e=>{let s=e.reduce((e,s)=>e+s.product.price*s.quantity,0);return{subtotal:s,shipping:10,total:s+10}}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,782,178,81,441,517,358],()=>s(5850)),_N_E=e.O()}]);